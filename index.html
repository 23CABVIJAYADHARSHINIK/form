<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Registration Form CRUD</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      padding: 20px;
    }
    .container {
      max-width: 900px;
      margin: auto;
    }
    .card {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }
    h2 {
      text-align: center;
    }
    .form-group {
      margin-bottom: 12px;
    }
    label {
      font-weight: bold;
    }
    input {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }
    .error {
      color: red;
      font-size: 13px;
    }
    button {
      padding: 10px 15px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .btn-submit {
      background: #0d6efd;
      color: #fff;
      width: 100%;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      table-layout: fixed;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: center;
      word-wrap: break-word;
      overflow-wrap: break-word;
      vertical-align: middle;
      font-size: 14px;
    }
    th {
      background: #222;
      color: #fff;
      font-weight: 600;
    }
    .btn-edit { background: orange; color: #fff; }
    .btn-delete { background: red; color: #fff; }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h2>Registration Form</h2>
      <form id="regForm">
        <div class="form-group">
          <label>Name</label>
          <input type="text" id="name" />
          <div class="error" id="nameErr"></div>
        </div>

        <div class="form-group">
          <label>Email</label>
          <input type="email" id="email" />
          <div class="error" id="emailErr"></div>
        </div>

        <div class="form-group">
          <label>Password</label>
          <input type="password" id="password" />
          <div class="error" id="passwordErr"></div>
        </div>

        <div class="form-group">
          <label>Date of Birth</label>
          <input type="date" id="dob" />
          <div class="error" id="dobErr"></div>
        </div>

        <div class="form-group">
          <label>IFSC Code</label>
          <input type="text" id="ifsc" />
          <div class="error" id="ifscErr"></div>
        </div>

        <div class="form-group">
          <label>Account Number</label>
          <input type="text" id="account" />
          <div class="error" id="accountErr"></div>
        </div>

        <div class="form-group">
          <label>Attach File</label>
          <input type="file" id="file" />
        </div>

        <button class="btn-submit" type="submit">Register</button>
      </form>
    </div>

    <div class="card">
      <h2>Registered Users</h2>
      <table class="user-table">
        <thead>
          <tr>
            <th style="width:10%">Name</th>
            <th style="width:20%">Email</th>
            <th style="width:12%">Password</th>
            <th style="width:10%">DOB</th>
            <th style="width:12%">IFSC</th>
            <th style="width:15%">Account</th>
            <th style="width:20%">File</th>
            <th style="width:13%">Action</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
    </div>
  </div>

  <script>
    let users = [];
    let editIndex = null;

    document.getElementById("regForm").addEventListener("submit", function(e) {
      e.preventDefault();

      clearErrors();

      const name = nameEl.value.trim();
      const email = emailEl.value.trim();
      const password = passwordEl.value;
      const dob = dobEl.value;
      const ifsc = ifscEl.value.trim();
      const account = accountEl.value.trim();
      const file = fileEl.files[0];

      let valid = true;

      if (!name) showError("nameErr", "Name required"), valid = false;
      if (!email.includes("@")) showError("emailErr", "Valid email required"), valid = false;
      if (password.length < 6) showError("passwordErr", "Min 6 characters"), valid = false;
      if (!dob) showError("dobErr", "DOB required"), valid = false;
      if (!/^[A-Z]{4}0[A-Z0-9]{6}$/.test(ifsc)) showError("ifscErr", "Invalid IFSC"), valid = false;
      if (!/^[0-9]{9,18}$/.test(account)) showError("accountErr", "9â€“18 digits only"), valid = false;

      if (!valid) return;

      const user = { name, email,password, dob, ifsc, account, file: file ? file.name : "" };

      if (editIndex !== null) {
        users[editIndex] = user;
        editIndex = null;
        document.querySelector(".btn-submit").innerText = "Register";
      } else {
        users.push(user);
      }

      renderTable();
      this.reset();
    });

    const nameEl = document.getElementById("name");
    const emailEl = document.getElementById("email");
    const passwordEl = document.getElementById("password");
    const dobEl = document.getElementById("dob");
    const ifscEl = document.getElementById("ifsc");
    const accountEl = document.getElementById("account");
    const fileEl = document.getElementById("file");

    function renderTable() {
      tableBody.innerHTML = "";
      users.forEach((u, i) => {
        tableBody.innerHTML += `
          <tr>
            <td>${u.name}</td>
            <td>${u.email}</td>
            <td>${u.password}</td>
            <td>${u.dob}</td>
            <td>${u.ifsc}</td>
            <td>${u.account}</td>
            <td>${u.file || "-"}</td>
            <td>
              <button class="btn-edit" onclick="editUser(${i})">Edit</button>
              <button class="btn-delete" onclick="deleteUser(${i})">Delete</button>
            </td>
          </tr>`;
      });
    }

    function editUser(i) {
      const u = users[i];
      nameEl.value = u.name;
      emailEl.value = u.email;
      passwordEl.value = u.password;
      dobEl.value = u.dob;
      ifscEl.value = u.ifsc;
      accountEl.value = u.account;
      editIndex = i;
      document.querySelector(".btn-submit").innerText = "Update";
    }

    function deleteUser(i) {
      users.splice(i, 1);
      renderTable();
    }

    function showError(id, msg) {
      document.getElementById(id).innerText = msg;
    }

    function clearErrors() {
      document.querySelectorAll('.error').forEach(e => e.innerText = "");
    }
  </script>
</body>
</html>
